<!DOCTYPE html>
<html>
<head>
  <meta charset="utf8">
</head>
<body>
<div id="contents">
<video id="camera"></video>
<!-- <canvas id="canvas" ></canvas> -->
</div>
<script>
var CONSTRAINTS = {
  audio: false,
  video: {
  
    facingMode: { exact: "environment" }  // どのカメラを利用するか

    // facingModeには最終的に以下のいずれかの値を入れる
    //   facingMode: "user"                    // フロントカメラを利用する
    //   facingMode: { exact: "environment" }  // リアカメラを利用する
  }
};
// var curSTREAM = null;
window.onload = () => {
var video = document.getElementById("camera")
// var movie = document.getElementById("canvas")

// video.style = 'display:none'

// const ctx = movie.getContext("2d")
navigator.mediaDevices.getUserMedia(CONSTRAINTS)
    .then( (stream) => {
      // curSTREAM = stream;   // 前後の切り替え用に保持

      // <video>とStremaを接続
      video.srcObject = stream;
      
        video.play();
      
    })
    .catch( (err) => {
      console.log(`${err.name}: ${err.message}`);
      alert("カメラとの接続時にエラーが発生しました");
    });
// setInterval(() => {
//  ctx.drawImage(video, 0, 0)
// },1)
}
</script>
</body>
</html>
